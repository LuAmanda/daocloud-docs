---
title: DCE 架构
---

## DCE 架构

DCE 是一套容器集群解决方案，集群中每一个节点都安装有 Docker Engine。在使用 DCE 的容器集群中，存在着三种角色：
>* DCE 主控节点：该节点处理所有的用户请求，并管理集群中的所有容器节点。同一时刻，一个容器集群只有一个 DCE 主控节点。 
>* DCE 副控节点：该节点作为 DCE 主控节点的副本，保障集群的高可用性。同一时刻，一个容器集群可以有多个 DCE 副控节点。
>* DCE 容器节点：该节点运行用户的容器和应用。同一时刻，一个容器集群可以有多个 DCE 容器节点。

![](arch.jpg)

### DCE 主控节点

DCE 主控节点负责处理用户所有的请求，同时为用户提供一套易用的 WEB UI (即 DCE 控制台)。用户可以通过浏览器访问主控节点 IP 或使用 CLI 客户端来操作 DCE。

下面是部署主控节点时，会在主控节点上安装运行的容器列表：

| 容器名称 | 容器职责 |
| -------- | ------- |
| dce_agent | 运行用户所有的容器和应用 |
| dce_controller | 调用 dce_swarm_manager 服务，向用户提供 WEB 控制台 UI，集群管理 API 和 CLI 运维套件服务 |
| dce_swarm_manager | 安装有 Swarm 服务的容器，负责容器节点的管理和自发现 |
| dce_etcd | key-value 键值库，负责存储集群中的各种信息，如虚拟网络信息，用户信息等 |


### DCE 副控节点

DCE 目前已经支持高可用性方案。如果你需要一个高可用容器集群，你可以部署多个副控节点来保证高可用性。

部署副控节点有如下优势：
>* 通过主控节点和副控节点来处理用户请求，避免性能瓶颈，保证负载均衡，
>* 包含多个主控节点的备份，具备较高的容灾能力


下表为部署副控节点时，会在副控节点上运行的容器：

| 容器名称 | 容器职责 |
| -------- | ------- |
| dce_agent | 运行用户所有的容器和应用 |
| dce_controller | 调用 dce_swarm_manager 服务，向用户提供 WEB 控制台 UI，集群管理 API 和 CLI 运维套件服务 |
| dce_swarm_manager | 安装有 Swarm 服务的容器，负责管理和发现容器节点 |
| dce_etcd | key-value 键值库，负责存储集群中的各种信息，如虚拟网络信息，用户信息等 |

### DCE 容器节点

DCE 容器节点负责运行用户所有的 Docker 容器和应用。当你通过 DCE 在容器节点上部署你自己的容器或应用后，你能够通过 DCE 控制台查看到所有部署完成的容器和应用，如果你使用 CLI 客户端或其他方式在容器节点上部署你的容器或应用后， DCE 同样能够通过自发现服务查找到你的容器和应用，方便你通过 DCE 控制台管理和监控你的应用。

下表为部署容器节点时，会在容器节点上安装运行的容器：

| 容器名称 | 容器职责 |
| -------- | ------- |
| dce_agent | 运行用户所有的容器和应用 |
